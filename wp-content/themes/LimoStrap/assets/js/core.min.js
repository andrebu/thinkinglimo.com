var fissa = 0;
function toggleNavbar() {
    if ($(window) .scrollTop() > (250)) {
        if (fissa == 0) {
            fissa = 1;
            $('.navbar').addClass('navbar-fixed-top').css({
                opacity: 0,
                top: - 30
            }).animate({
                opacity: 1,
                top: 0
            }, 200, function () {
            });
            $('.navbar').addClass('navbar-fissa');
            $('.navbar').removeClass('navbar-statica');
            $('.navbar').addClass('navbar-inverse');
            $('.navbar').removeClass('navbar-default');
        }
    }
    if ($(window).scrollTop() < (250)) {
        if (fissa == 1) {
            fissa = 0;
            $('.navbar').animate({
                opacity: 0,
                top: - 30
            }, 200, function () {
                $('.navbar').removeClass('navbar-fixed-top');
                $('.navbar').removeClass('navbar-fissa');
                $('.navbar').addClass('navbar-statica') .animate({
                    opacity: 1,
                    top: 0
                }, 300);
            });
            $('.navbar').addClass('navbar-default');
            $('.navbar').removeClass('navbar-inverse');
        }
    }
}
function pareggio_h(a) {
    var b = 0;
    $(a) .each(function (c, d) {
        if ($(this) .height() > b) {
            b = $(this) .height();
        }
    });
    $(a) .height(b);
}
var lastId,topMenuHeight = 90,menuItems = $('#section_nav').find('a'),scrollItems = menuItems.map(function () {
    var a = $($(this) .attr('href'));
    if (a.length) {
        return a;
    }
});
menuItems.click(function (c) {
    var a = $(this).attr('href'),
    b = a === '#' ? 0 : $(a).offset().top - topMenuHeight + 1;
    $('html, body').stop().animate({
        scrollTop: b
    }, 1000, 'easeInOutExpo');
    c.preventDefault();
});

$(window).scroll(function () {
    if ($(window).width() >= 768) {
       // toggleNavbar();
    }
    if ($(this) .scrollTop() > 500 && $(this).width() > 1024 && $('#section_nav').length > 0) {
        $('#section_nav a').fadeIn();
        var a = $(this).scrollTop() + topMenuHeight;
        var b = scrollItems.map(function () {
            if ($(this).offset() .top < a) {
                return this;
            }
        });
        b = b[b.length - 1];
        var c = b && b.length ? b[0].id : '';
        if (lastId !== c) {
            lastId = c;
            menuItems.parent().removeClass('active').end().filter('[href=#' + c + ']').parent().addClass('active');
        }
    } else {
        $('#section_nav a').fadeOut();
    }
});

$(window).resize(function () {
    if ($(window).width() >= 768) {
        $('.navbar-fissa .dropdown-toggle, .navbar-statica .dropdown-toggle').click(function (a) {
            a.preventDefault();
            return false;
        });
        $('.navbar').removeClass('navbar-mobile');
        $('.navbar').addClass('navbar-fissa');
    } else {
        $('.navbar').addClass('navbar-fixed-top');
        $('.navbar').addClass('navbar-mobile');
        $('.navbar').removeClass('navbar-statica');
        $('.navbar').removeClass('navbar-fissa');
        $('.navbar').addClass('navbar-inverse');
        $('.navbar').removeClass('navbar-default');
    }
    if ($('#section_nav').length > 0) {
        $('#section_nav').css({
            'margin-top': - ($('#section_nav') .height() / 2 + 8)
        });
    }
    $(window).trigger('scroll');
});

$.fn.togglePlaceholder = function() {
		return this.each(function() {
			$(this)
			.data("holder", $(this).attr("placeholder"))
			.focusin(function(){
				$(this).attr('placeholder','');
			})
			.focusout(function(){
				$(this).attr('placeholder',$(this).data('holder'));
			});
		});
	};

$(window) .trigger('resize');

$(document).ready(function () {

	$(".custom-select").each(function(){
		$(this).wrap("<span class='select-wrapper'></span>");
		$(this).after("<span class='holder'></span>");
	});
	$(".custom-select").change(function(){
		var selectedOption = $(this).find(":selected").text();
		$(this).next(".holder").text(selectedOption);
	}).trigger('change');
	
	
	$('.custom-select').on('blur', function(){
	  $(this).parent().removeClass('focussed');
	}).on('focus', function(){
	  $(this).parent().addClass("focussed");
	});
	
	
	$("[placeholder]").togglePlaceholder();

	
	
	 $('#usefrompickup').change(function(){
       
		if($(this).is(':checked')) {
			
		   $('input[data-copyvalto]').each(function(){
                $($(this).data('copyvalto')).val($(this).val());
            });
			var dropstate=$('#state').val();
			$('#dropstate option').each(function(){
				var $this = $(this); // cache this jQuery object to avoid overhead

				if ($this.val() == dropstate) { // if this option's value is equal to our value
					$this.prop('selected', true); // select this option
					var state=$this.html();
					$('#dropstate').val(dropstate);
					$('#dropstate_select .holder').html(state);
					
					return false; // break the loop, no need to look further
				}
			});
			
			var dropcountry=$('#country').val();
			$('#dropcountry option').each(function(){
				var $this = $(this); // cache this jQuery object to avoid overhead

				if ($this.val() == dropcountry) { // if this option's value is equal to our value
					$this.prop('selected', true); // select this option
					var country=$this.html();
					$('#dropcountry').val(dropcountry);
					$('#dropcountry_select .holder').html(country);
					
					return false; // break the loop, no need to look further
				}
			});
        }
		
    });
	
    $('.filtri a') .click(function () {
        $('.filtri a.current') .removeClass('current');
        $(this) .addClass('current');
        var f = $(this) .data('filtro') .substr(7);
        if (f == 'tutti') {
            $('.grid-item') .animate({
                opacity: 1
            }, 300);
        } else {
            $('.grid-item') .each(function () {
                if (!$(this) .hasClass(f)) {
                    $(this) .animate({
                        opacity: 0.1
                    }, 300);
                } else {
                    $(this) .animate({
                        opacity: 1
                    }, 300);
                }
            });
        }
        return false;
    });
    if ($('#section_nav') .length > 0) {
        $('#section_nav a') .tooltip();
    }
   
    
   
    $('textarea') .autosize();
    $('textarea').focus(function (f) {
        if ($(this).val() == 'Message *' || $(this).val() == 'Notes/Special Instructions' || $(this).val() == 'List of passengers' || $(this).val() == 'Additional Info') {
            $(this).val('').css('color', '#00000b');
        }
    });
    
	$('.reservation .pass_info textarea').blur(function (f) {
        if ($(this).val() == '') {
            $(this).val('List of passengers').css('color', '#00000b');
        }
    });
	
	$('.reservation .additional_info textarea').blur(function (f) {
        if ($(this).val() == '') {
            $(this).val('Additional Info').css('color', '#00000b');
        }
    });	
	
	$('.reservation textarea').blur(function (f) {
        if ($(this).val() == '') {
            $(this).val('Notes/Special Instructions').css('color', '#00000b');
        }
    });
	
	
	$('textarea').blur(function (f) {
        if ($(this).val() == '') {
            $(this).val('Message *').css('color', '#00000b');
        }
    });
	 
	
    if ($(window) .width() > 1200) {
        $('.parallax') .each(function (f, h) {
            var g = $(h);
            g.scrollAnimate({
                startScroll: g.offset() .top - $(window) .height(),
                endScroll: g.offset() .top + g.height(),
                cssProperty: 'background-position-y',
                before: 0,
                after: - 0
            });
        });
        $('.img-block') .each(function (f, h) {
            var g = $(h);
            g.scrollAnimate({
                startScroll: g.offset() .top - $(window) .height(),
                endScroll: g.offset() .top + g.height(),
                cssProperty: 'background-position-y',
                before: 0,
                after: - 0
            });
        });
    }
    $('.scroll-top') .click(function (f) {
        $('body, html') .animate({
            scrollTop: 0
        }, 1000, 'easeInOutExpo');
        f.preventDefault();
    });
    $.fn.waypoint.defaults = {
        context: window,
        continuous: true,
        enabled: true,
        horizontal: false,
        offset: 0,
        triggerOnce: false
    };
    if ($(window) .width() > 1024) {
        $.fn.waypoint.defaults = {
            context: window,
            continuous: true,
            enabled: true,
            horizontal: false,
            offset: '80%',
            triggerOnce: false
        };
        $('.totop-wrapper') .waypoint(function (f) {
            if (f == 'down') {
                $('#section_nav') .fadeOut();
            } else {
                $('#section_nav') .fadeIn();
            }
        });
        $('.tofade,.toflip,.tofadel,.tofader') .css('opacity', 0);
        $('.tofade') .waypoint(function (f) {
            if (f == 'down') {
                $(this) .removeClass('animated fadeOutDown') .addClass('animated fadeInUp');
            } else {
                $(this) .removeClass('animated fadeInUp') .addClass('animated fadeOutDown');
            }
        });
        $('.toflip') .waypoint(function (f) {
            if (f == 'down') {
                $(this) .removeClass('animated fadeOutDown') .addClass('animated flipInY');
            } else {
                $(this) .removeClass('animated flipInY') .addClass('animated fadeOutDown');
            }
        });
        $('.tofadel') .waypoint(function (f) {
            if (f == 'down') {
                $(this) .removeClass('animated fadeOutLeft') .addClass('animated fadeInLeft');
            } else {
                $(this) .removeClass('animated fadeInLeft') .addClass('animated fadeOutLeft');
            }
        });
        $('.tofader') .waypoint(function (f) {
            if (f == 'down') {
                $(this) .removeClass('animated fadeOutRight') .addClass('animated fadeInRight');
            } else {
                $(this) .removeClass('animated fadeInRight') .addClass('animated fadeOutRight');
            }
        });
    }
   
   
    
    $(window).trigger('resize');
});
